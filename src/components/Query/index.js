import React from "react";
import { useQuery } from "@apollo/react-hooks";

const Query = ({ children, query, slug, limit, start }) => {
  const { data, loading, error } = useQuery(query, {
    variables: { slug: slug, limit: limit, start: start },
  });

  if (loading)
    return (
      <>
        <svg
          width="346"
          height="366"
          viewBox="0 0 346 366"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="flex md:hidden mt-10 ml-4 animate-pulse"
        >
          <path
            d="M346 200.146C346 210.559 335.795 219 323.206 219H22.7942C10.2051 219 0 210.559 0 200.146V18.854C0 8.44129 10.2051 0 22.7942 0H323.206C335.795 0 346 8.44129 346 18.854V200.146Z"
            fill="#C4C4C4"
          />
          <path d="M346 251H0V255H346V251Z" fill="#929292" />
          <path d="M260 288H28V292H260V288Z" fill="#929292" />
          <path d="M329 362H97V366H329V362Z" fill="#929292" />
          <path d="M346 325H0V329H346V325Z" fill="#929292" />
        </svg>
        <svg
          className="hidden md:flex md:w-auto animate-pulse"
          width="1440"
          height="647"
          viewBox="0 0 1440 647"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M478.758 384.347C478.758 397.293 466.053 407.788 450.38 407.788H76.378C60.705 407.788 48 397.293 48 384.347V158.948C48 146.002 60.705 135.507 76.378 135.507H450.38C466.053 135.507 478.758 146.002 478.758 158.948V384.347Z"
            fill="#C4C4C4"
          />
          <path
            d="M935.042 384.347C935.042 397.293 922.337 407.788 906.664 407.788H532.662C516.99 407.788 504.284 397.293 504.284 384.347V158.948C504.284 146.002 516.989 135.507 532.662 135.507H906.664C922.336 135.507 935.042 146.002 935.042 158.948V384.347Z"
            fill="#C4C4C4"
          />
          <path
            d="M1391.33 384.347C1391.33 397.293 1378.62 407.788 1362.95 407.788H988.946C973.273 407.788 960.568 397.293 960.568 384.347V158.948C960.568 146.002 973.273 135.507 988.946 135.507H1362.95C1378.62 135.507 1391.33 146.002 1391.33 158.948V384.347Z"
            fill="#C4C4C4"
          />
          <path
            d="M478.758 447.788H48V452.788H478.758V447.788Z"
            fill="#767478"
          />
          <path
            d="M371.879 494.023H83.404V499.023H371.879V494.023Z"
            fill="#767478"
          />
          <path
            d="M457.649 586.493H169.174V591.493H457.649V586.493Z"
            fill="#767478"
          />
          <path
            d="M478.758 540.258H48V545.258H478.758V540.258Z"
            fill="#767478"
          />
          <path
            d="M935.042 447.788H504.284V452.788H935.042V447.788Z"
            fill="#767478"
          />
          <path
            d="M792.759 494.023H504.284V499.023H792.759V494.023Z"
            fill="#767478"
          />
          <path
            d="M935.042 586.493H504.284V591.493H935.042V586.493Z"
            fill="#767478"
          />
          <path
            d="M935.041 540.258H592.641V545.258H935.041V540.258Z"
            fill="#767478"
          />
          <path
            d="M1391.33 586.493H960.568V591.493H1391.33V586.493Z"
            fill="#767478"
          />
          <path
            d="M1355.92 540.258H1067.45V545.258H1355.92V540.258Z"
            fill="#767478"
          />
          <path
            d="M1270.15 447.788H981.677V452.788H1270.15V447.788Z"
            fill="#767478"
          />
          <path
            d="M1391.33 494.023H960.568V499.023H1391.33V494.023Z"
            fill="#767478"
          />
          <path
            d="M256 71C256 79.284 254.961 86 253.679 86H50.3214C49.0394 86 48 79.284 48 71C48 62.716 49.0394 56 50.3214 56H253.679C254.961 56 256 62.715 256 71Z"
            fill="#C4C4C4"
          />
        </svg>
      </>
    );
  if (error) return <p>Error: {JSON.stringify(error)}</p>;
  return children({ data });
};

export default Query;
